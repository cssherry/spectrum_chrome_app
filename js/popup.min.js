function sendMessage(a,b){chrome.tabs.query({active:true,currentWindow:true},function(c){var d=c[0].id;chrome.tabs.sendMessage(d,a,b)})}function addSpectrumEvents(){var e;var b=$(".spectrum-popup-body");var f=b.find('[data-show-type="hidden"]');var a=b.find('[data-show-type="hiddenIcon"]');var g=b.find('[data-show-type="minimized"]');var c={action:"getLocalStorage",localValues:["hidden","hiddenIcon","minimized"],};sendMessage(c,function(h){e=h.currentArticle;if(e){b.removeClass("spectrum-disabled")}if(h.hidden){f.filter(".spectrum-hide-panel").hide()}else{f.filter(".spectrum-show-option").hide()}if(h.minimized){g.filter(".spectrum-hide-panel").hide()}else{g.filter(".spectrum-show-option").hide()}if(h.hiddenIcon){a.filter(".spectrum-hide-panel").hide()}else{a.filter(".spectrum-show-option").hide()}});function d(h){if(h==="hidden"){f.toggle()}else{if(h==="minimized"){g.toggle()}else{a.toggle()}}}b.on("click.hidePanel",".spectrum-hide-panel",function(j){var i=j.target.dataset;var h={action:"hideSpectrumPanel",typeButton:i.hideType,showType:i.showType,};d(i.showType);sendMessage(h)});b.on("click.showPanel",".spectrum-show-option",function(i){var j=i.target.dataset.showType;var h={action:"showSpectrumPanel",showType:j,};d(j);sendMessage(h)})}document.addEventListener("DOMContentLoaded",function(){addSpectrumEvents()});